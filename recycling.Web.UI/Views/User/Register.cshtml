@{
    ViewBag.Title = "用户注册";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- 引入外部CSS文件，媒体查询写在外部文件中 -->
<link href="~/Content/register.css" rel="stylesheet" />

<div class="register-container">
    <h2 class="register-title">用户注册</h2>

    <form id="registerForm">
        <div class="form-group">
            <input type="text" class="form-control" id="username" placeholder="请输入用户名" required>
        </div>

        <div class="form-group">
            <input type="password" class="form-control" id="password" placeholder="请输入密码" required>
            <button type="button" class="toggle-password" id="togglePassword">👁️</button>
        </div>

        <div class="form-group">
            <input type="password" class="form-control" id="confirmPassword" placeholder="请再次输入密码" required>
            <button type="button" class="toggle-password" id="toggleConfirmPassword">👁️</button>
        </div>

        <div class="form-group">
            <input type="text" class="form-control" id="phoneNumber" placeholder="请输入手机号" required>
        </div>

        <div class="form-group">
            <input type="email" class="form-control" id="email" placeholder="请输入邮箱" required>
        </div>

        <div class="register-buttons">
            <button type="submit" class="btn btn-primary btn-register">注册</button>
            <button type="button" class="btn btn-danger btn-cancel" id="cancelBtn">取消</button>
        </div>
    </form>
</div>

<script>
    // 取消按钮事件
    document.getElementById('cancelBtn').addEventListener('click', function() {
        window.location.href = '@Url.Action("Login", "User")';
    });

    // 密码显示/隐藏切换
    function togglePasswordVisibility(inputId, buttonId) {
        const input = document.getElementById(inputId);
        const button = document.getElementById(buttonId);
        const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
        input.setAttribute('type', type);
        button.textContent = type === 'password' ? '👁️' : '👁️‍🗨️';
    }

    document.getElementById('togglePassword').addEventListener('click', function() {
        togglePasswordVisibility('password', 'togglePassword');
    });

    document.getElementById('toggleConfirmPassword').addEventListener('click', function() {
        togglePasswordVisibility('confirmPassword', 'toggleConfirmPassword');
    });

    // 表单提交处理
    document.getElementById('registerForm').addEventListener('submit', function(e) {
        e.preventDefault();

        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        if (password !== confirmPassword) {
            alert('两次输入的密码不一致，请重新输入');
            return;
        }

        // 模拟注册成功
        alert('注册成功！');
        window.location.href = '@Url.Action("Login", "User")';
    });

    // JavaScript动态调整响应式样式（替代CSS媒体查询）
    function adjustLayout() {
        const container = document.querySelector('.register-container');
        if (window.innerWidth <= 480) {
            container.style.margin = '20px 15px';
            container.style.padding = '20px';
        } else {
            container.style.margin = '40px auto';
            container.style.padding = '30px';
        }
    }

    // 初始化时调整一次
    adjustLayout();
    // 窗口大小变化时重新调整
    window.addEventListener('resize', adjustLayout);
</script>
