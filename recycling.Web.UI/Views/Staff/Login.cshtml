@model recycling.Model.StaffLoginViewModel

<!-- 工作人员登录区域（与原代码完全一致） -->
<div id="staffLoginArea" class="staff-login-form" style="display: none;">
    <form id="staffLoginForm" action="@Url.Action("Login", "Staff")" method="post">
        @Html.AntiForgeryToken()

        <div class="form-group">
            <input type="text" class="form-control" id="staffUsername" name="Username"
                   placeholder="请输入工作人员账号" required>
            @Html.ValidationMessageFor(m => m.Username, null, new { @class = "field-validation-error" })
        </div>

        <div class="form-group password-group">
            <input type="password" class="form-control password-input" id="staffPassword" name="Password"
                   placeholder="请输入密码" required>
            <button type="button" class="toggle-password" id="toggleStaffPassword">
                <i class="fas fa-eye-slash" aria-hidden="true"></i>
            </button>
            @Html.ValidationMessageFor(m => m.Password, null, new { @class = "field-validation-error" })
        </div>

        <div class="form-group">
            <div class="captcha-container">
                <input type="text" class="form-control captcha-input" id="staffCaptcha" name="Captcha"
                       placeholder="请输入验证码" maxlength="4" required>
                @Html.ValidationMessageFor(m => m.Captcha, null, new { @class = "field-validation-error" })

                <div class="captcha-image" id="staffCaptchaImage" title="点击刷新验证码">
                </div>
            </div>
            <input type="hidden" id="staffGeneratedCaptcha" name="GeneratedCaptcha" />
            @Html.HiddenFor(m => m.StaffRole, new { id = "staffRoleHidden" })
        </div>

        <div class="login-buttons">
            <button type="submit" class="btn btn-primary btn-login">登录</button>
            <button type="button" class="btn btn-danger btn-cancel" id="staffCancelBtn">取消</button>
        </div>
    </form>
</div>

<!-- 同步角色下拉框值到隐藏字段 -->
<script>
    // 当工作人员角色下拉框变化时，同步值到表单隐藏字段
    document.getElementById('staffRole').addEventListener('change', function () {
        document.getElementById('staffRoleHidden').value = this.value;
    });

    // 初始化隐藏字段值
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('staffRoleHidden').value = document.getElementById('staffRole').value;
    });
</script>
