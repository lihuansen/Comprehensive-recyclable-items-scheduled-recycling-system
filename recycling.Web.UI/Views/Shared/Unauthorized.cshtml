@{
    ViewBag.Title = "暂无权限";
    var message = ViewData["Message"] as string ?? "暂无权限访问此功能";
    
    // 根据用户角色确定使用的布局
    var staffRole = Session["StaffRole"] as string;
    if (staffRole == "admin")
    {
        Layout = "~/Views/Shared/_AdminLayout.cshtml";
    }
    else if (staffRole == "superadmin")
    {
        Layout = "~/Views/Shared/_SuperAdminLayout.cshtml";
    }
    else if (staffRole == "recycler")
    {
        Layout = "~/Views/Shared/_RecyclerLayout.cshtml";
    }
    else
    {
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
}

<style>
    .unauthorized-container {
        background: white;
        border-radius: 15px;
        padding: 60px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        text-align: center;
        max-width: 600px;
        margin: 50px auto;
    }

    .unauthorized-icon {
        font-size: 100px;
        color: #f44336;
        margin-bottom: 30px;
    }

    .unauthorized-title {
        font-size: 36px;
        font-weight: bold;
        color: #333;
        margin-bottom: 20px;
    }

    .unauthorized-message {
        font-size: 18px;
        color: #666;
        margin-bottom: 40px;
        line-height: 1.6;
    }

    .btn-return {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        padding: 12px 40px;
        font-size: 16px;
        border: none;
        border-radius: 25px;
        text-decoration: none;
        display: inline-block;
        transition: all 0.3s;
    }

    .btn-return:hover {
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        text-decoration: none;
    }

    .info-text {
        margin-top: 30px;
        font-size: 14px;
        color: #999;
    }
</style>

<div class="unauthorized-container">
    <div class="unauthorized-icon">
        <i class="glyphicon glyphicon-ban-circle"></i>
    </div>
    <h1 class="unauthorized-title">暂无权限</h1>
    <p class="unauthorized-message">@message</p>
    @if (staffRole == "admin")
    {
        <a href="@Url.Action("AdminDashboard", "Staff")" class="btn-return">
            <i class="glyphicon glyphicon-home"></i> 返回工作台
        </a>
    }
    else if (staffRole == "superadmin")
    {
        <a href="@Url.Action("SuperAdminDashboard", "Staff")" class="btn-return">
            <i class="glyphicon glyphicon-home"></i> 返回工作台
        </a>
    }
    else if (staffRole == "recycler")
    {
        <a href="@Url.Action("RecyclerDashboard", "Staff")" class="btn-return">
            <i class="glyphicon glyphicon-home"></i> 返回工作台
        </a>
    }
    else
    {
        <a href="@Url.Action("Index", "Home")" class="btn-return">
            <i class="glyphicon glyphicon-home"></i> 返回首页
        </a>
    }
    <p class="info-text">如需访问此功能，请联系超级管理员分配相应权限</p>
</div>
