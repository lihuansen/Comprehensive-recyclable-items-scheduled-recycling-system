@model recycling.Model.WalletViewModel
@{
    ViewBag.Title = "我的钱包";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@* Inline styles are used to match the existing project pattern (see Profile.cshtml, AddressManagement.cshtml, etc.) *@
<style>
    .wallet-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 30px;
    }

    .wallet-header {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        padding: 40px;
        border-radius: 15px;
        margin-bottom: 30px;
        text-align: center;
        box-shadow: 0 5px 20px rgba(240, 147, 251, 0.3);
    }

    .wallet-icon {
        font-size: 64px;
        margin-bottom: 15px;
        opacity: 0.9;
    }

    .balance-label {
        font-size: 16px;
        opacity: 0.9;
        margin-bottom: 10px;
    }

    .balance-amount {
        font-size: 48px;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .balance-info {
        font-size: 14px;
        opacity: 0.8;
    }

    .action-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 25px;
    }

    .wallet-btn {
        background: rgba(255, 255, 255, 0.3);
        color: white;
        border: 2px solid white;
        padding: 10px 30px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .wallet-btn:hover {
        background: white;
        color: #f5576c;
        text-decoration: none;
    }

    .wallet-btn.disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .wallet-section {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 25px;
    }

    .section-title {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 20px;
        color: #333;
        display: flex;
        align-items: center;
        gap: 10px;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 15px;
    }

    .section-title i {
        color: #f5576c;
    }

    .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .feature-item {
        padding: 20px;
        border: 2px solid #f0f0f0;
        border-radius: 10px;
        text-align: center;
        transition: all 0.3s;
        cursor: pointer;
        background: #fafafa;
    }

    .feature-item:hover {
        border-color: #f5576c;
        background: white;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(245, 87, 108, 0.2);
    }

    .feature-item.disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .feature-item.disabled:hover {
        transform: none;
        border-color: #f0f0f0;
        box-shadow: none;
    }

    .feature-icon {
        font-size: 36px;
        color: #f5576c;
        margin-bottom: 10px;
    }

    .feature-title {
        font-size: 16px;
        font-weight: bold;
        margin-bottom: 8px;
        color: #333;
    }

    .feature-desc {
        font-size: 13px;
        color: #666;
    }

    .coming-soon {
        display: inline-block;
        background: #ffc107;
        color: white;
        font-size: 11px;
        padding: 2px 8px;
        border-radius: 10px;
        margin-top: 5px;
    }

    .transaction-list {
        margin-top: 20px;
    }

    .transaction-empty {
        text-align: center;
        padding: 60px 20px;
        color: #999;
    }

    .transaction-empty i {
        font-size: 64px;
        margin-bottom: 15px;
        opacity: 0.3;
    }

    .transaction-empty-text {
        font-size: 16px;
    }

    .back-link {
        display: inline-block;
        margin-bottom: 20px;
        color: #666;
        text-decoration: none;
        transition: color 0.3s;
    }

    .back-link:hover {
        color: #f5576c;
        text-decoration: none;
    }

    .info-box {
        background: #fff9e6;
        border-left: 4px solid #ffc107;
        padding: 15px;
        border-radius: 5px;
        margin-top: 20px;
    }

    .info-box i {
        color: #ffc107;
        margin-right: 10px;
    }

    .info-box-text {
        color: #856404;
        font-size: 14px;
    }

    .quick-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin-top: 20px;
    }

    .stat-card {
        text-align: center;
        padding: 20px;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        border-radius: 10px;
    }

    .stat-value {
        font-size: 28px;
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
    }

    .stat-label {
        font-size: 13px;
        color: #666;
    }
</style>

<div class="wallet-container">
    <!-- 返回个人中心链接 -->
    <a href="@Url.Action("Profile", "Home")" class="back-link">
        <i class="fas fa-arrow-left"></i> 返回个人中心
    </a>

    <!-- 钱包头部 - 显示余额 -->
    <div class="wallet-header">
        <div class="wallet-icon">
            <i class="fas fa-wallet"></i>
        </div>
        <div class="balance-label">钱包余额</div>
        <div class="balance-amount">
            ¥ @(Model.CurrentBalance.ToString("F2"))
        </div>
        <div class="balance-info">
            <i class="fas fa-shield-alt"></i> 资金安全由平台保障
        </div>
        
        <!-- 快捷操作按钮 -->
        <div class="action-buttons">
            <a href="javascript:void(0)" class="wallet-btn disabled" onclick="alert('充值功能即将上线，敬请期待！')">
                <i class="fas fa-plus-circle"></i> 充值
            </a>
            <a href="javascript:void(0)" class="wallet-btn disabled" onclick="alert('提现功能即将上线，敬请期待！')">
                <i class="fas fa-arrow-circle-down"></i> 提现
            </a>
            <a href="javascript:void(0)" class="wallet-btn disabled" onclick="alert('转账功能即将上线，敬请期待！')">
                <i class="fas fa-exchange-alt"></i> 转账
            </a>
        </div>
    </div>

    <!-- 快速统计 -->
    <div class="wallet-section">
        <div class="section-title">
            <i class="fas fa-chart-line"></i>
            <span>资金概览</span>
        </div>
        <div class="quick-stats">
            <div class="stat-card">
                <div class="stat-value">¥@Model.TotalIncome.ToString("F2")</div>
                <div class="stat-label">累计收入</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">¥@Model.TotalExpense.ToString("F2")</div>
                <div class="stat-label">累计支出</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">@Model.MonthlyTransactionCount</div>
                <div class="stat-label">本月交易</div>
            </div>
        </div>
    </div>

    <!-- 钱包功能区 -->
    <div class="wallet-section">
        <div class="section-title">
            <i class="fas fa-credit-card"></i>
            <span>支付账户管理</span>
        </div>
        
        @if (Model.PaymentAccounts != null && Model.PaymentAccounts.Count > 0)
        {
            <div style="margin-bottom: 20px;">
                foreach (var account in Model.PaymentAccounts)
                {
                    <div style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; margin-bottom: 10px; background: @(account.IsDefault ? "#f8f9fa" : "white");">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: bold; margin-bottom: 5px;">
                                    <i class="@account.GetAccountTypeIconClass()" style="color: #f5576c; margin-right: 8px;"></i>
                                    @account.GetAccountTypeDisplayName()
                                    @if (account.IsDefault)
                                    {
                                        <span style="background: #28a745; color: white; font-size: 11px; padding: 2px 8px; border-radius: 10px; margin-left: 8px;">默认</span>
                                    }
                                    @if (account.IsVerified)
                                    {
                                        <i class="fas fa-check-circle" style="color: #28a745; margin-left: 5px;" title="已验证"></i>
                                    }
                                </div>
                                <div style="color: #666; font-size: 14px;">
                                    @account.AccountName - @account.GetMaskedAccountNumber()
                                </div>
                                @if (!string.IsNullOrEmpty(account.BankName))
                                {
                                    <div style="color: #999; font-size: 13px; margin-top: 3px;">
                                        @account.BankName
                                    </div>
                                }
                            </div>
                            <div>
                                <button class="btn btn-sm btn-outline-danger" onclick="if(confirm('确定要删除此支付账户吗？')) alert('删除功能开发中');">删除</button>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <button class="btn btn-primary" onclick="alert('添加支付账户功能开发中');">
                <i class="fas fa-plus"></i> 添加支付账户
            </button>
        }
        else
        {
            <div style="text-align: center; padding: 40px 20px; color: #999;">
                <i class="fas fa-credit-card" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                <div style="margin-bottom: 15px;">您还没有绑定支付账户</div>
                <button class="btn btn-primary" onclick="alert('添加支付账户功能开发中');">
                    <i class="fas fa-plus"></i> 添加支付账户
                </button>
            </div>
        }
        
        <div class="info-box" style="margin-top: 20px;">
            <i class="fas fa-info-circle"></i>
            <span class="info-box-text">提示：绑定支付账户后，您可以快速进行充值和提现操作。支持支付宝、微信支付和银行卡。</span>
        </div>
    </div>

    <!-- 钱包功能区 -->
    <div class="wallet-section">
        <div class="section-title">
            <i class="fas fa-th-large"></i>
            <span>钱包功能</span>
        </div>
        
        <div class="feature-grid">
            <!-- 充值 -->
            <div class="feature-item disabled" onclick="alert('充值功能即将上线，敬请期待！')">
                <div class="feature-icon">
                    <i class="fas fa-credit-card"></i>
                </div>
                <div class="feature-title">余额充值</div>
                <div class="feature-desc">支持支付宝、微信、银行卡等多种充值方式</div>
                <span class="coming-soon">即将上线</span>
            </div>

            <!-- 提现 -->
            <div class="feature-item disabled" onclick="alert('提现功能即将上线，敬请期待！')">
                <div class="feature-icon">
                    <i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="feature-title">余额提现</div>
                <div class="feature-desc">快速提现到绑定的银行卡或支付宝</div>
                <span class="coming-soon">即将上线</span>
            </div>

            <!-- 转账 -->
            <div class="feature-item disabled" onclick="alert('转账功能即将上线，敬请期待！')">
                <div class="feature-icon">
                    <i class="fas fa-exchange-alt"></i>
                </div>
                <div class="feature-title">转账支付</div>
                <div class="feature-desc">向其他用户或商家进行转账支付</div>
                <span class="coming-soon">即将上线</span>
            </div>

            <!-- 账单 -->
            <div class="feature-item disabled" onclick="alert('账单功能即将上线，敬请期待！')">
                <div class="feature-icon">
                    <i class="fas fa-file-invoice-dollar"></i>
                </div>
                <div class="feature-title">账单明细</div>
                <div class="feature-desc">查看详细的收支记录和账单明细</div>
                <span class="coming-soon">即将上线</span>
            </div>

            <!-- 银行卡管理 -->
            <div class="feature-item disabled" onclick="alert('银行卡管理功能即将上线，敬请期待！')">
                <div class="feature-icon">
                    <i class="fas fa-university"></i>
                </div>
                <div class="feature-title">银行卡管理</div>
                <div class="feature-desc">绑定和管理您的银行卡信息</div>
                <span class="coming-soon">即将上线</span>
            </div>

            <!-- 支付密码 -->
            <div class="feature-item disabled" onclick="alert('支付密码功能即将上线，敬请期待！')">
                <div class="feature-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <div class="feature-title">支付密码</div>
                <div class="feature-desc">设置和修改支付密码，保障资金安全</div>
                <span class="coming-soon">即将上线</span>
            </div>
        </div>
    </div>

    <!-- 交易记录区 -->
    <div class="wallet-section">
        <div class="section-title">
            <i class="fas fa-history"></i>
            <span>交易记录</span>
        </div>
        
        <div class="transaction-list">
            @if (Model.RecentTransactions != null && Model.RecentTransactions.Count > 0)
            {
                foreach (var transaction in Model.RecentTransactions)
                {
                    <div style="border-bottom: 1px solid #f0f0f0; padding: 15px 0; display: flex; justify-content: space-between; align-items: center;">
                        <div style="flex: 1;">
                            <div style="font-weight: bold; margin-bottom: 5px;">
                                @transaction.GetTransactionTypeDisplayName()
                                <span style="color: #999; font-size: 13px; margin-left: 10px;">
                                    @transaction.CreatedDate.ToString("yyyy-MM-dd HH:mm")
                                </span>
                            </div>
                            <div style="color: #666; font-size: 14px;">
                                @transaction.Description
                            </div>
                            <div style="color: #999; font-size: 12px; margin-top: 3px;">
                                流水号: @transaction.TransactionNo
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 18px; font-weight: bold; color: @(transaction.IsIncome() ? "#28a745" : "#dc3545");">
                                @(transaction.IsIncome() ? "+" : "-")¥@transaction.Amount.ToString("F2")
                            </div>
                            <div style="color: #999; font-size: 13px; margin-top: 3px;">
                                余额: ¥@transaction.BalanceAfter.ToString("F2")
                            </div>
                        </div>
                    </div>
                }
                <div style="text-align: center; margin-top: 20px;">
                    <a href="javascript:void(0)" onclick="alert('查看完整交易记录功能开发中');" style="color: #f5576c; text-decoration: none;">
                        查看完整交易记录 <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            }
            else
            {
                <!-- 暂无交易记录 -->
                <div class="transaction-empty">
                    <div>
                        <i class="fas fa-receipt"></i>
                    </div>
                    <div class="transaction-empty-text">
                        暂无交易记录
                    </div>
                    <div style="margin-top: 10px; font-size: 13px; color: #bbb;">
                        您的交易记录将会显示在这里
                    </div>
                </div>
            }
        </div>
    </div>

    <!-- 安全提示 -->
    <div class="wallet-section">
        <div class="section-title">
            <i class="fas fa-shield-alt"></i>
            <span>安全提示</span>
        </div>
        <div style="line-height: 1.8; color: #666;">
            <p style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px;"></i>请勿向陌生人透露您的账户信息和支付密码</p>
            <p style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px;"></i>充值和提现请通过平台官方渠道进行</p>
            <p style="margin-bottom: 10px;"><i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px;"></i>定期修改密码，保障账户安全</p>
            <p style="margin-bottom: 0;"><i class="fas fa-check-circle" style="color: #28a745; margin-right: 8px;"></i>如遇资金异常，请及时联系客服处理</p>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // 钱包页面脚本 - 预留用于后续功能实现
        // 未来将在此处添加充值、提现、转账等功能的交互逻辑
    </script>
}
