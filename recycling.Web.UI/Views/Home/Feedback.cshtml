@{
    ViewBag.Title = "问题反馈";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>问题反馈</h2>

@* 使用标准 POST 表单提交到 HomeController.Feedback (HttpPost) *@
@using (Html.BeginForm("Feedback", "Home", FormMethod.Post, new { @id = "feedbackForm" }))
{
    @Html.AntiForgeryToken()

    <div>
        <label>反馈类型</label><br />
        <label><input type="radio" name="FeedbackType" value="问题反馈" checked /> 问题反馈</label>
        <label><input type="radio" name="FeedbackType" value="功能建议" /> 功能建议</label>
        <label><input type="radio" name="FeedbackType" value="投诉举报" /> 投诉举报</label>
        <label><input type="radio" name="FeedbackType" value="其他" /> 其他</label>
    </div>

    <div>
        <label for="Subject">主题（必填，最多100字）</label><br />
        <input type="text" id="Subject" name="Subject" maxlength="100" required style="width:60%;" />
    </div>

    <div>
        <label for="Description">详细描述（必填，10-1000字）</label><br />
        <textarea id="Description" name="Description" rows="8" cols="80" minlength="10" maxlength="2000" required></textarea>
    </div>

    <div>
        <label for="ContactEmail">联系邮箱（选填）</label><br />
        <input type="email" id="ContactEmail" name="ContactEmail" placeholder="example@domain.com" style="width:40%;" />
    </div>

    <div style="margin-top:12px;">
        <button type="submit">提交反馈</button>
        <a href="@Url.Action("Index","Home")" style="margin-left:12px;">返回首页</a>
    </div>
}

@section Scripts {
    @* 不需要 AJAX：用标准表单提交。保留很小的提示脚本（可选） *@
    <script type="text/javascript">
        // 可选：阻止重复提交（简单实现）
        (function () {
            var form = document.getElementById('feedbackForm');
            if (!form) return;
            form.addEventListener('submit', function (e) {
                var btn = this.querySelector('button[type="submit"]');
                if (btn) {
                    btn.disabled = true;
                    btn.textContent = '提交中...';
                }
            });
        })();
    </script>
}