# 用户头像功能使用说明

## 功能概述

用户头像功能允许用户在个人中心设置和管理自己的头像，支持以下操作：

1. **上传自定义头像** - 从本地文件夹选择图片上传
2. **更换头像** - 随时更换已上传的头像
3. **选择默认头像** - 从5个预设的默认头像中选择

## 使用方法

### 访问头像管理

1. 登录用户账户
2. 进入"个人中心"页面
3. 点击头像或"修改头像"按钮

### 上传自定义头像

1. 在头像管理弹窗中，点击"选择图片"按钮
2. 从本地文件夹选择图片文件
3. 系统自动上传并设置为您的头像

**支持的图片格式：** JPG、JPEG、PNG、GIF、BMP  
**文件大小限制：** 最大 5MB

### 选择默认头像

1. 在头像管理弹窗中，浏览默认头像选项（5种颜色）
2. 点击您喜欢的默认头像
3. 确认后即可设置为您的头像

### 更换头像

- 随时重复上述步骤即可更换头像
- 新头像会立即在个人中心和网站导航栏显示

## 技术特点

- **圆形显示** - 所有头像自动适配为圆形显示
- **自适应** - 图片自动裁剪并适配头像框
- **即时更新** - 头像更改后立即在全站生效
- **文件验证** - 自动检查文件类型和大小

## 默认头像

系统提供5个不同颜色的默认头像：
- 紫蓝色 (avatar1.svg)
- 紫色 (avatar2.svg)
- 红色 (avatar3.svg)
- 绿色 (avatar4.svg)
- 橙色 (avatar5.svg)

## 注意事项

1. 头像文件存储在 `/Uploads/Avatars/` 目录
2. 默认头像存储在 `/Uploads/Avatars/Default/` 目录
3. 用户头像URL保存在数据库的 `Users` 表 `url` 字段中
4. 建议上传清晰的正方形图片以获得最佳显示效果

## 开发者信息

### 数据库字段

- **表名**: Users
- **字段名**: url
- **类型**: nvarchar(50)
- **允许NULL**: 是

### API接口

1. **上传头像**
   - URL: `/Home/UploadAvatar`
   - 方法: POST
   - 参数: avatarFile (HttpPostedFileBase)

2. **设置默认头像**
   - URL: `/Home/SetDefaultAvatar`
   - 方法: POST
   - 参数: avatarName (string)

### 相关文件

- **控制器**: `HomeController.cs`
- **业务逻辑层**: `UserBLL.cs`
- **数据访问层**: `UserDAL.cs`
- **视图**: `Profile.cshtml`
- **布局**: `_Layout.cshtml`
